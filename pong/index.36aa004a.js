!function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),a.forEach((function(n){t(e,n,i[n])}))}return e}function i(e,t,n){return e<t?t:e>n?n:e}var a=function(){"use strict";function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}var n,a,l;return n=t,(a=[{key:"clamp",value:function(e,n){return new t(i(this.x,e.x,n.x),i(this.y,e.y,n.y))}},{key:"distance_squared_to",value:function(e){return(this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y)}},{key:"magnitude",value:function(){return Math.sqrt(this.distance_squared_to(new t(0,0)))}},{key:"normalized",value:function(){return new t(this.x/this.magnitude(),this.y/this.magnitude())}},{key:"plus",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"times",value:function(e){return new t(this.x*e,this.y*e)}}])&&e(n.prototype,a),l&&e(n,l),t}();function l(e){return n({ball_position:new a(0,0),ball_velocity:new a(0,e.ball_initial_speed),player_paddle_x:0,ai_paddle_x:0},e)}function o(e,t){if(r(e))return e;var i,l,o,s=e.ball_radius,c=e.ball_max_bounce_angle,_=e.paddle_width,h=e.paddle_height,p=e.ai_movement_speed,y={position:e.ball_position.plus(e.ball_velocity.times(t)),velocity:e.ball_velocity};return y=d(s,c,y.position,y.velocity,e.player_paddle_x,1-.5*e.paddle_height,_,h),y=d(s,c,y.position,y.velocity,e.ai_paddle_x,.5*e.paddle_height-1,_,h),i=s,l=y.position,o=y.velocity,n({},e,{ball_position:(y=l.x-i<-1?{position:new a(-1+i,l.y),velocity:new a(-1*o.x,o.y)}:l.x+i>1?{position:new a(1-i,l.y),velocity:new a(-1*o.x,o.y)}:{position:l,velocity:o}).position,ball_velocity:y.velocity,ai_paddle_x:e.ai_paddle_x+t*u(s,c,y.position,y.velocity,e.player_paddle_x,e.ai_paddle_x,_,h,p)})}function r(e){return null!==s(e)}function s(e){return e.ball_position.y-e.ball_radius<-1?"player":e.ball_position.y+e.ball_radius>1?"ai":null}function d(e,t,n,i,l,o,r,s){var d=l-.5*r,u=l+.5*r,c=o-.5*s,_=o+.5*s,h=n.clamp(new a(d,c),new a(u,_));if(!(n.distance_squared_to(h)<e*e))return{position:n,velocity:i};var p=i.y<0?_+e+.001:c-e-.001,y=i.normalized();y.y*=-1;var f=Math.abs((n.y-p)/y.y),v=n.plus(y.times(f)),b=(v.x-l)/(.5*r),x=.5*Math.PI-b*t;return{position:v,velocity:new a(Math.cos(x),-Math.sign(i.y)*Math.sin(x)).times(i.magnitude())}}function u(e,t,n,a,l,o,r,s,d){if(a.y>=0)return 0;var u,c=Math.sign(a.y),_=Math.sign(a.x),h=-_,p=(Math.abs(c-n.y)-s-e)/Math.abs(a.y),y=Math.abs(a.x*p),f=Math.abs(_-n.x)-e;if(y<f)u=n.x+a.x*p;else{var v=2-2*e,b=(y-f)%v;u=Math.floor((y-f)/v)%2==0?_-Math.sign(a.x)*b:h+Math.sign(a.x)*b}var x=-Math.sign(l)*(1-e);return d*(u-.5*i(Math.atan((x-u)/2)/t,-1,1)*r-o)}window.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("demo-canvas");if(!(e instanceof HTMLCanvasElement))throw new Error("cannot find canvas");var t=e.getContext("2d",{alpha:!1});if(null===t)throw new Error("cannot get context");var n={ball_radius:.05,ball_initial_speed:1.6,ball_max_bounce_angle:.3*Math.PI,paddle_width:.4,paddle_height:.05,ai_movement_speed:1},i={background_color:"white",foreground_color:"#ed12a5"},a=l(n),d=null;e.addEventListener("mousemove",(function(t){a.player_paddle_x=t.offsetX/e.clientWidth*2-1}));var u=function(){var e=performance.now(),c=d?(e-d)/1e3:0;d=e,function(e,t,n){t.fillStyle=n.background_color,t.fillRect(0,0,t.canvas.width,t.canvas.height),t.save(),t.scale(t.canvas.width/2,t.canvas.height/2),t.translate(1,1),t.fillStyle=n.foreground_color,t.beginPath(),t.rect(e.player_paddle_x-.5*e.paddle_width,1-e.paddle_height,e.paddle_width,e.paddle_height),t.rect(e.ai_paddle_x-.5*e.paddle_width,-1,e.paddle_width,e.paddle_height),t.arc(e.ball_position.x,e.ball_position.y,e.ball_radius,0,2*Math.PI),t.fill(),t.restore()}(a=o(a,c),t,i),r(a)?("player"===s(a)&&n.ball_initial_speed<3&&(n.ball_initial_speed+=.2,n.ai_movement_speed+=.2),a=l(n),d=null,setTimeout((function(){return requestAnimationFrame(u)}),1e3)):requestAnimationFrame(u)};u()}))}();
//# sourceMappingURL=index.36aa004a.js.map
