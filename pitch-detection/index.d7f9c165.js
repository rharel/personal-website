const e=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];window.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("demo-detected-frequency"),n=document.getElementById("demo-detected-note");if(null===t||null===n)throw new Error("missing demo element");!async function(t,n,o){const r=new AudioContext,a=r.sampleRate/2,i=a/1.9499999999999957,c=(()=>{let e=32;for(;e<i&&e<=32768;)e*=2;return e})(),d=2*c,l=await navigator.mediaDevices.getUserMedia({audio:!0}),s=r.createMediaStreamSource(l),u=r.createAnalyser();u.fftSize=d,s.connect(u);const m=a/c,f=Math.floor(32.7/m),g=Math.ceil(2093/m),h=new Uint8Array(c),M=[],y={};requestAnimationFrame((function r(){requestAnimationFrame(r),u.getByteFrequencyData(h);let a=0,i=0;for(let e=f;e<g;e+=1)h[e]>a&&(a=h[e],i=e);if(a<t)return;const c=(i+.5)*m,d=Math.round(12*Math.log2(c/440)),l=d+9,s=4+Math.floor(l/12),w=e[d%12<0?12+d%12:d%12]+s.toString();if(M.length>=n){const e=M.splice(0,1)[0];y[e]-=1}M.push(w),w in y||(y[w]=0),y[w]+=1;let A="";for(const e in y)(""===A||y[e]>y[A])&&(A=e);""!==A&&o(c,A)}))}(125,12,((e,o)=>{t.textContent=`${Math.round(e)}Hz`,n.textContent=o}))}));
//# sourceMappingURL=index.d7f9c165.js.map
