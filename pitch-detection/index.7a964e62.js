!function(){let e=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];async function t(t,n,o){let r=new AudioContext,a=r.sampleRate/2,i=a/1.9499999999999957,l=(()=>{let e=32;for(;e<i&&e<=32768;)e*=2;return e})(),d=await navigator.mediaDevices.getUserMedia({audio:!0}),u=r.createMediaStreamSource(d),c=r.createAnalyser();c.fftSize=2*l,u.connect(c);let m=a/l,f=Math.floor(32.7/m),s=Math.ceil(2093/m),g=new Uint8Array(l),h=[],M={};requestAnimationFrame(function r(){requestAnimationFrame(r),c.getByteFrequencyData(g);let a=0,i=0;for(let e=f;e<s;e+=1)g[e]>a&&(a=g[e],i=e);if(a<t)return;let l=(i+.5)*m,d=Math.round(12*Math.log2(l/440)),u=4+Math.floor((d+9)/12),y=e[d%12<0?12+d%12:d%12]+u.toString();if(h.length>=n){let e=h.splice(0,1)[0];M[e]-=1}h.push(y),y in M||(M[y]=0),M[y]+=1;let A="";for(let e in M)(""===A||M[e]>M[A])&&(A=e);""!==A&&o(l,A)})}window.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("demo-detected-frequency"),n=document.getElementById("demo-detected-note");if(null===e||null===n)throw Error("missing demo element");t(125,12,(t,o)=>{e.textContent=`${Math.round(t)}Hz`,n.textContent=o})})}();
//# sourceMappingURL=index.7a964e62.js.map
