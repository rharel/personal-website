function t(t,e,n,a){const r=(o=n,JSON.parse(JSON.stringify(o)));var o;let i=new Array(t.length).fill(-1),l=new Array(e).fill(0),c=!0;for(;c;)l.fill(0),c=!1,t.forEach(((t,n)=>{let o=0,s=a(t,r[0]);for(let n=1;n<e;++n){const e=a(t,r[n]);e<s&&(s=e,o=n)}-1!==i[n]&&i[n]===o||(c=!0),i[n]=o,l[o]+=1})),c&&(r.forEach((t=>t.fill(0))),t.forEach(((t,e)=>{const n=i[e],a=l[n],o=r[n];o.forEach(((e,n)=>o[n]+=t[n]/a))})));return r.map(((t,e)=>({mean:t,size:l[e]}))).filter((t=>t.size>0))}function e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function n(n,a,r){const o=[];for(let t=0;t<n.width-a;t+=a)for(let r=0;r<n.height-a;r+=a){const i=4*(e(t,t+a)+e(r,r+a)*n.width),l=n.data.slice(i,i+3);o.push([l[0],l[1],l[2]])}const i=o.map((t=>function(t,e,n){t/=255,e/=255,n/=255;const a=Math.max(t,e,n),r=Math.min(t,e,n);let o=0,i=0,l=(a+r)/2;if(a===r)o=0,i=0;else{const c=a-r;switch(i=l>.5?c/(2-a-r):c/(a+r),a){case t:o=(e-n)/c+(e<n?6:0);break;case e:o=(n-t)/c+2;break;case n:o=(t-e)/c+4}o/=6}return[o,i,l]}(t[0],t[1],t[2]))),l=[];for(let t=0;t<r;t+=1){const t=e(0,i.length-1);l.push(i[t])}return t(i,r,l,(function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])})).sort(((t,e)=>e.size-t.size)).map((t=>function(t,e,n){function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}let r=0,o=0,i=0;if(0===e)r=n,o=n,i=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;r=a(c,l,t+1/3),o=a(c,l,t),i=a(c,l,t-1/3)}return[Math.max(Math.min(256*r,255),0),Math.max(Math.min(256*o,255),0),Math.max(Math.min(256*i,255),0)]}(t.mean[0],t.mean[1],t.mean[2])))}function a(t){if(null===t.files||1!==t.files.length)return;const e=t.files.item(0);if(null===e)return;const a=new Image;a.src=URL.createObjectURL(e),a.addEventListener("load",(()=>{const t=document.querySelectorAll(".demo-palette-color"),e=t.length,r=Math.ceil(Math.min(a.naturalWidth,a.naturalHeight)/20),o=function(t,e,a){const r=document.createElement("canvas");r.width=t.naturalWidth,r.height=t.naturalHeight;const o=r.getContext("2d");if(null===o)throw new Error("cannot get canvas context");return o.drawImage(t,0,0,r.width,r.height),n(o.getImageData(0,0,r.width,r.height),e,a)}(a,r,e).map((t=>t.map(Math.round)));for(let e=0;e<t.length;e+=1)t.item(e).style.removeProperty("background-color");for(let e=0;e<o.length;e+=1){const n=o[e],a=t.item(e);a.style.backgroundColor=`rgb(${n[0]}, ${n[1]}, ${n[2]})`,a.setAttribute("aria-label",`Colored square: rgb(${n[0]}, ${n[1]}, ${n[2]})`)}}))}window.addEventListener("DOMContentLoaded",(function(){var t;const e=document.getElementById("demo-image");e instanceof HTMLInputElement&&(e.addEventListener("change",(()=>a(e))),null===(t=document.getElementById("demo-select-image-button"))||void 0===t||t.addEventListener("click",(()=>e.click())))}));
//# sourceMappingURL=index.14492903.js.map
